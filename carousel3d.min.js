/*
 Carousel3D v1.0.0
 (c) 2015 Clearwave Designs, LLC. http://clearwavedesigns.com
 License: Apache 2.0
*/

function Carousel3D(t){var e=function(t){return document.querySelector(t)},a=function(t){for(var e=document.querySelectorAll(t),a=[],i=0,r=e.length;r>i;i++)a[i]=e[i];return a},i=e(t.box),r=a(t.points),o=t.pointsPercentOf||.25,n=t.perspective||0===t.perspective?t.perspective:.25,s=t.depth||0===t.depth?1/t.depth:2,l=t.float||"left",f=t.opacity?t.opacity:1,h=t.grayscale?t.grayscale:0,c=t.sepia?t.sepia:0,u=t.blur?t.blur:0,p="",d="",m=0,M=0,v=[],P=0,b=r.length,y=(Math.ceil(b/2),360/b),I=t.animate||0===t.animate?t.animate:0,g=t.fps||0===t.fps?t.fps:62.5,x=I?I/g:0,w=I?I/x:1,z=0,T=null,k=0,q=function(){z+=k;var t=0>z?360- -1*z%360:z;S(t)},E=function(){setTimeout(function(){T?z>=P?clearTimeout(this):(q(),E()):P>=z?clearTimeout(this):(q(),E())},x)},L=function(t){if(I){var e=t;T=e>P,z=P,P=e,k=(P-z)/w,E()}else S(t),console.log("here")},S=function(t){for(var e=0,a=[];b>e;e++)a[e]=v[e]+t+90;for(e=0;b>e;e++){var i=a[e]*Math.PI/180,o=(v[e]+t)%360*Math.PI/180,n=o<Math.PI?o/Math.PI:(2*Math.PI-o)/Math.PI,l=o>Math.PI?1-(Math.PI-(o-Math.PI))/(Math.PI*s):1-o/(Math.PI*s),P=m*Math.cos(i)+m,I=M*Math.sin(i)+M,g=function(){var a=(v[e]+t+180)%360;return Math.round(a>180?(180-(a-180))/y:a/y)}(),x="position:absolute;z-index:"+g+";left:"+P+"px;top:"+I+"px;"+d+p+"-webkit-transform:scale("+l+","+l+");-moz-transform:scale("+l+","+l+");-ms-transform:scale("+l+","+l+");-o-transform:scale("+l+","+l+");transform:scale("+l+","+l+");",w="opacity:"+(1>f?1-(1-1*f)*n:1)+";",z="grayscale("+(h?1*h*n:0)+")",T="sepia("+(c?1*c*n:0)+")",k="blur("+(u?u*n:0)+"px)",q=w+"-webkit-filter:"+z+" "+T+" "+k+";-moz-filter:"+z+" "+T+" "+k+";-ms-filter:"+z+" "+T+" "+k+";-o-filter:"+z+" "+T+" "+k+";filter:"+z+" "+T+" "+k+";";r[e].style.cssText=x+q}},W=function(){var t=i.offsetWidth,e=t*n;i.style.height=e+"px";var a=r[0].offsetWidth,s=r[0].offsetHeight,f=s/a,h=t*o;p="width:"+h+"px;height:auto;",d="margin:-"+h*f/2+"px auto auto -"+h/2+"px;",m=t/2,M=e/2,v=["left"===l?360:0];for(var c=1;b>c;c++)v.push("left"===l?360-Math.floor(c*y):Math.floor(c*y));S(0)};return function(){i.style.position="relative",W.bind(this)(),window.addEventListener("load",W.bind(this)),window.addEventListener("resize",W.bind(this))}.bind(this)(),{turn:L}}
