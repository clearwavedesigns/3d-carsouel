/*
 Carousel3D v1.1.1
 (c) 2015 Clearwave Designs, LLC. http://clearwavedesigns.com
 License: Apache 2.0
*/

function Carousel3D(t){var e=function(t){return document.querySelector(t)},a=function(t){for(var e=document.querySelectorAll(t),a=[],i=0,r=e.length;r>i;i++)a[i]=e[i];return a},i=t.carousel,r=e(i),n=t.items,o=a(n),s=t.itemsPercentOf||.25,l=t.perspective||0===t.perspective?t.perspective:.25,f=t.depth||0===t.depth?1/t.depth:2,h=t.float||"left",c=t.opacity?t.opacity:1,u=t.grayscale?t.grayscale:0,p=t.sepia?t.sepia:0,d=t.blur?t.blur:0,m="",M="",v=0,P=0,y=[],I=0,b=o.length,g=Math.ceil(b/2),x=360/b,w=t.animate||0===t.animate?t.animate:0,z=t.fps||0===t.fps?t.fps:62.5,T=w?w/z:0,k=w?w/T:1,q=0,E=null,L=0,S=function(){q+=L;var t=0>q?360- -1*q%360:q;C(t)},W=function(){setTimeout(function(){E?q>=I?clearTimeout(this):(S(),W()):I>=q?clearTimeout(this):(S(),W())},T)},A=function(t){if(w){var e=t;E=e>I,q=I,I=e,L=(I-q)/k,W()}else C(t)},C=function(t){for(var e=0,a=[];b>e;e++)a[e]=y[e]+t+90;for(e=0;b>e;e++){var i=a[e]*Math.PI/180,r=(y[e]+t)%360*Math.PI/180,n=r<Math.PI?r/Math.PI:(2*Math.PI-r)/Math.PI,s=r>Math.PI?1-(Math.PI-(r-Math.PI))/(Math.PI*f):1-r/(Math.PI*f),l=v*Math.cos(i)+v,h=P*Math.sin(i)+P,I=function(){var a=(y[e]+t+180)%360;return Math.round(a>180?(180-(a-180))/x:a/x)}(),g="position:absolute;z-index:"+I+";left:"+l+"px;top:"+h+"px;"+M+m+"-webkit-transform:scale("+s+","+s+");-moz-transform:scale("+s+","+s+");-ms-transform:scale("+s+","+s+");-o-transform:scale("+s+","+s+");transform:scale("+s+","+s+");",w="opacity:"+(1>c?1-(1-1*c)*n:1)+";",z="grayscale("+(u?1*u*n:0)+")",T="sepia("+(p?1*p*n:0)+")",k="blur("+(d?d*n:0)+"px)",q=w+"-webkit-filter:"+z+" "+T+" "+k+";-moz-filter:"+z+" "+T+" "+k+";-ms-filter:"+z+" "+T+" "+k+";-o-filter:"+z+" "+T+" "+k+";filter:"+z+" "+T+" "+k+";";o[e].style.cssText=g+q}},D=function(){var t=r.offsetWidth,e=t*l;r.style.height=e+"px";var a=o[0].offsetWidth,i=o[0].offsetHeight,n=i/a,f=t*s;m="width:"+f+"px;height:auto;",M="margin:-"+f*n/2+"px auto auto -"+f/2+"px;",v=t/2,P=e/2,y=["left"===h?360:0];for(var c=1;b>c;c++)y.push("left"===h?360-Math.floor(c*x):Math.floor(c*x));C(0)},H=function(){r=e(i),o=a(n),b=o.length,g=Math.ceil(b/2),x=360/b,D()};return function(){r.style.position="relative",D.bind(this)(),window.addEventListener("load",D.bind(this)),window.addEventListener("resize",D.bind(this))}.bind(this)(),{turn:A,reset:H}}
